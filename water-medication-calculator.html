<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>饮水加药计算器</title>
<style>
:root {
    --label-width: 120px;
    --input-width: 120px;
}

/* -------------------- 公共样式 -------------------- */
body {
    margin: 0;
    padding: 20px;
    background: #f0f8ff;
    font-family: Arial, Helvetica, sans-serif;
    min-height: 100vh;
    box-sizing: border-box;
}
.container {
    max-width: 1200px;
    margin: 0 auto;
    position: relative;
}
.tabs { display: flex; border-bottom: 2px solid #0066cc; margin-bottom: 15px; }
.tab { padding: 8px 25px; cursor: pointer; font-weight: bold; color: #0066cc; background: #e6f0ff; border: 2px solid #0066cc; border-radius: 20px; margin-right: 10px; transition: all 0.3s ease; }
.tab.active { background: #0066cc; color: #fff; border-radius: 20px; }
.tab:hover { background: #d0e4ff; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,102,204,0.2); }
.tab.active:hover { background: #0055aa; }
.tab-content { display: none; }
.tab-content.active { display: block; }
.diagram { position: relative; height: 700px; background: url('https://raw.githubusercontent.com/Vopell/wellhope/main/image.jpg') no-repeat center center; background-size: contain; }
.input-group { margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.input-group label { width: var(--label-width); font-weight: bold; }
.input-group input, .input-group select { width: var(--input-width); height: 30px; padding: 4px 8px; border: 1px solid #999; border-radius: 4px; }
.unit { font-weight: bold; }

.reset-btn { position: absolute; top: 2%; left: 7%; padding: 12px 28px; background: linear-gradient(135deg,#ffa500,#ff8c00); color: #fff; border: none; border-radius: 30px; cursor: pointer; font-size: 16px; font-weight: bold; z-index: 20; box-shadow: 0 6px 18px rgba(255,140,0,0.4); transition: all 0.3s ease; }
.reset-btn::before { content: "↻"; font-size: 18px; }
.reset-btn:hover { background: #e67e00; transform: translateY(-3px); box-shadow: 0 10px 25px rgba(255,140,0,0.6); }
.result { width: calc(100% - 40px); max-width: 1046px; margin: 0 auto; padding: 24px; background: rgba(0,102,204,0.9); color: #fff; font-size: 24px; text-align: center; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); position: absolute; left: 50%; bottom: 3px; transform: translateX(-50%); z-index: 15; }

/* -------------------- 移动端专属 -------------------- */
@media (max-width: 768px) {
    body { padding: 15px; }
    .tabs, .diagram, .reset-btn, .result { display: none; }

    .mobile-calculator { display: block; max-width: 500px; margin: 0 auto; background: #fff; border-radius: 12px; padding: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
    .mobile-calculator h2 { text-align: center; color: #0066cc; margin-bottom: 20px; }
    .mobile-group { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
    .mobile-group label { flex: 1; font-weight: bold; color: #333; }
    .mobile-group input, .mobile-group select { flex: 1; height: 40px; border: 1px solid #ccc; border-radius: 6px; padding: 0 10px; }
    .unit { margin-left: 6px; font-weight: bold; }

    .mobile-result { display: none; background: #0066cc; color: #fff; padding: 15px; border-radius: 8px; margin-top: 15px; text-align: center; }
    .mobile-result.active { display: block; }
    .mobile-buttons { display: flex; gap: 10px; margin-top: 15px; }
    .mobile-buttons button { flex: 1; height: 45px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; }
    .calculate-btn { background: #0066cc; color: #fff; }
    .reset-btn-mobile { background: #f0f0f0; color: #333; border: 1px solid #ccc; }
}
</style>
</head>
<body>

<!-- 桌面端 -->
<div class="tabs">
    <div class="tab active" data-tab="sim">模拟</div>
    <div class="tab" data-tab="info">说明</div>
</div>

<div class="tab-content active" id="sim">
    <div class="container">
        <div class="diagram">
            <button class="reset-btn" onclick="resetAll()">清零</button>
        </div>
        <div class="result" id="result">请按顺序输入参数</div>
    </div>
</div>

<div class="tab-content" id="info">
    <div class="instructions">
        该计算器用于计算通过加药器向饮水中加药时所需加入的药量。
    </div>
</div>

<!-- 移动端直接显示计算器 -->
<div class="mobile-calculator">
    <h2>饮水加药计算器</h2>
    <div class="mobile-group">
        <label for="num">牲畜数量</label>
        <input type="number" id="num" min="1">
        <span class="unit">头</span>
    </div>
    <div class="mobile-group">
        <label for="weight">平均体重</label>
        <input type="number" id="weight" min="0" step="0.1">
        <span class="unit">kg</span>
    </div>
    <div class="mobile-group">
        <label for="dosage">给药剂量</label>
        <input type="number" id="dosage" min="0" step="0.1">
        <span class="unit">mg/kg</span>
    </div>
    <div class="mobile-group">
        <label for="conc">产品有效浓度</label>
        <input type="number" id="conc" min="0" step="0.1">
        <span class="unit">%</span>
    </div>
    <div class="mobile-group">
        <label for="water">总耗水量</label>
        <input type="number" id="water" min="0">
        <span class="unit">升/天</span>
    </div>
    <div class="mobile-group">
        <label for="dispenser">加药器设置</label>
        <input type="number" id="dispenser" min="0" max="100" step="0.1">
        <span class="unit">%</span>
    </div>
    <div class="mobile-group">
        <label for="temp">温度</label>
        <select id="temp">
            <option value="normal">温度适中</option>
            <option value="hot">炎热</option>
        </select>
    </div>
    <div class="mobile-group">
        <label for="waste">浪费水量</label>
        <select id="waste">
            <option value="none">无浪费</option>
            <option value="low">低</option>
            <option value="mid">中</option>
            <option value="high">高</option>
        </select>
    </div>

    <div class="mobile-buttons">
        <button class="calculate-btn" id="calculate-btn">计算</button>
        <button class="reset-btn-mobile" id="reset-btn-mobile">重置</button>
    </div>

    <div class="mobile-result" id="mobile-result">
        <div id="result-text">请完整填写所有参数</div>
        <div id="bucket-info" style="margin-top:10px;">商业药品：<span id="product">0 g</span>，稀释水：<span id="stock">0 l</span></div>
    </div>
</div>

<script>
const mobile = {
    num: document.getElementById('num'),
    weight: document.getElementById('weight'),
    dosage: document.getElementById('dosage'),
    conc: document.getElementById('conc'),
    water: document.getElementById('water'),
    dispenser: document.getElementById('dispenser'),
    temp: document.getElementById('temp'),
    waste: document.getElementById('waste'),
    resultPanel: document.getElementById('mobile-result'),
    resultText: document.getElementById('result-text'),
    product: document.getElementById('product'),
    stock: document.getElementById('stock')
};

document.getElementById('calculate-btn').addEventListener('click', ()=>{
    const v = {
        num: +mobile.num.value || 0,
        weight: +mobile.weight.value || 0,
        dosage: +mobile.dosage.value || 0,
        conc: +mobile.conc.value || 0,
        water: +mobile.water.value || 0,
        dispenser: +mobile.dispenser.value || 0
    };
    if(v.num<=0||v.weight<=0||v.dosage<=0||v.conc<=0||v.water<=0||v.dispenser<=0){
        mobile.resultText.textContent = '请完整填写所有必要参数';
        mobile.resultPanel.classList.add('active');
        return;
    }
    // 温度和浪费水量调整
    let adjustedWater = v.water;
    if(mobile.temp.value==='hot') adjustedWater*=1.5;
    switch(mobile.waste.value){
        case 'low': adjustedWater*=1.1; break;
        case 'mid': adjustedWater*=1.2; break;
        case 'high': adjustedWater*=1.4; break;
    }

    const productGr = Math.round(v.num*v.weight*v.dosage/(v.conc*10));
    const stockL = adjustedWater*v.dispenser/100;
    mobile.product.textContent = productGr+' g';
    mobile.stock.textContent = stockL%1===0?stockL.toFixed(0)+' l':stockL.toFixed(1)+' l';
    mobile.resultText.textContent = `生产一天所需的原液，我们需要将 ${productGr} g 的商业药品加入 ${stockL%1===0?stockL.toFixed(0):stockL.toFixed(1)} l 稀释用水中。`;
    mobile.resultPanel.classList.add('active');
});

document.getElementById('reset-btn-mobile').addEventListener('click', ()=>{
    [mobile.num, mobile.weight, mobile.dosage, mobile.conc, mobile.water, mobile.dispenser].forEach(i=>i.value='');
    mobile.temp.value='normal';
    mobile.waste.value='none';
    mobile.resultPanel.classList.remove('active');
});

// 桌面端 tab 切换
document.querySelectorAll('.tab').forEach(tab=>{
    tab.addEventListener('click', ()=>{
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.tab-content').forEach(tc=>tc.classList.remove('active'));
        document.getElementById(tab.dataset.tab).classList.add('active');
    });
});

function resetAll(){location.reload();}
</script>

</body>
</html>
